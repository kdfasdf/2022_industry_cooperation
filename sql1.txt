-- 공고게시판
ALTER TABLE NOTICE_post
	DROP FOREIGN KEY FK_COMPANY_TO_NOTICE_post; --  기업 -> 공고게시판

-- 자격증
ALTER TABLE LICENSE
	DROP FOREIGN KEY FK_PERSONAL_TO_LICENSE; -- 개인 -> 자격증

-- 학적
ALTER TABLE HAKSA
	DROP FOREIGN KEY FK_PERSONAL_TO_HAKSA; -- 개인 -> 학적

-- 경력
ALTER TABLE CAREER
	DROP FOREIGN KEY FK_PERSONAL_TO_CAREER; -- 개인 -> 경력

-- 진행상황
ALTER TABLE PROGRESS
	DROP FOREIGN KEY FK_COMPANY_TO_PROGRESS; --  기업 -> 진행상황

-- 진행상황
ALTER TABLE PROGRESS
	DROP FOREIGN KEY FK_PERSONAL_TO_PROGRESS; -- 개인 -> 진행상황

-- 개인
ALTER TABLE PERSONAL
	DROP PRIMARY KEY; -- 개인 기본키

--  기업
ALTER TABLE COMPANY
	DROP PRIMARY KEY; --  기업 기본키

-- 공고게시판
ALTER TABLE NOTICE_post
	DROP PRIMARY KEY; -- 공고게시판 기본키

-- 자격증
ALTER TABLE LICENSE
	DROP PRIMARY KEY; -- 자격증 기본키

-- 학적
ALTER TABLE HAKSA
	DROP PRIMARY KEY; -- 학적 기본키

-- 경력
ALTER TABLE CAREER
	DROP PRIMARY KEY; -- 경력 기본키

-- 진행상황
ALTER TABLE PROGRESS
	DROP PRIMARY KEY; -- 진행상황 기본키

-- 개인
DROP TABLE IF EXISTS PERSONAL RESTRICT;

--  기업
DROP TABLE IF EXISTS COMPANY RESTRICT;

-- 공고게시판
DROP TABLE IF EXISTS NOTICE_post RESTRICT;

-- 자격증
DROP TABLE IF EXISTS LICENSE RESTRICT;

-- 학적
DROP TABLE IF EXISTS HAKSA RESTRICT;

-- 경력
DROP TABLE IF EXISTS CAREER RESTRICT;

-- 진행상황
DROP TABLE IF EXISTS PROGRESS RESTRICT;

-- 개인
CREATE TABLE PERSONAL (
	P_ID       VARCHAR(20) NOT NULL, -- 개인아이디
	NAME       VARCHAR(20) NOT NULL, -- 성명
	P_EMAIL    VARCHAR(50) NOT NULL, -- 이메일
	PHONE      VARCHAR(20) NOT NULL, -- 전화번호
	BIRTH_DATE DATE        NOT NULL  -- 생년월일
);

-- 개인
ALTER TABLE PERSONAL
	ADD CONSTRAINT PK_PERSONAL -- 개인 기본키
		PRIMARY KEY (
			P_ID -- 개인아이디
		);

--  기업
CREATE TABLE COMPANY (
	CO_ID     VARCHAR(20) NOT NULL, -- 기업아이디
	COMPANY   VARCHAR(50) NOT NULL, -- 기업명
	HR        VARCHAR(50) NOT NULL, -- HR담장자명
	CO_EMAIL  VARCHAR(50) NOT NULL, -- 기업이메일
	CO_NUMBER VARCHAR(20) NOT NULL  -- 기업전화번호
);

--  기업
ALTER TABLE COMPANY
	ADD CONSTRAINT PK_COMPANY --  기업 기본키
		PRIMARY KEY (
			CO_ID -- 기업아이디
		);

-- 공고게시판
CREATE TABLE NOTICE_post (
	POST_NO     INT UNSIGNED  NOT NULL, -- 게시물 번호
	CO_ID       VARCHAR(20)   NOT NULL, -- 기업아이디
	POSITION    VARCHAR(100)  NOT NULL, -- 포지션명
	QUALIFY     VARCHAR(800)  NOT NULL, -- 자격요건
	JOB         VARCHAR(1000) NOT NULL, -- 직무설명
	EMPLOY_TYPE VARCHAR(6)    NOT NULL, -- 고용형태
	REGI_DT     DATETIME      NOT NULL  -- 진행상태
);

-- 공고게시판
ALTER TABLE NOTICE_post
	ADD CONSTRAINT PK_NOTICE_post -- 공고게시판 기본키
		PRIMARY KEY (
			POST_NO -- 게시물 번호
		);

ALTER TABLE NOTICE_post
	MODIFY COLUMN POST_NO INT UNSIGNED NOT NULL AUTO_INCREMENT;

ALTER TABLE NOTICE_post
	AUTO_INCREMENT = 1;

-- 자격증
CREATE TABLE LICENSE (
	P_ID    VARCHAR(20) NOT NULL, -- 개인아이디
	LICENSE VARCHAR(20) NOT NULL  -- 자격증명
);

-- 자격증
ALTER TABLE LICENSE
	ADD CONSTRAINT PK_LICENSE -- 자격증 기본키
		PRIMARY KEY (
			P_ID,    -- 개인아이디
			LICENSE  -- 자격증명
		);

-- 학적
CREATE TABLE HAKSA (
	P_ID            VARCHAR(20) NOT NULL, -- 개인아이디
	SCHOOL_NAME     VARCHAR(50) NOT NULL, -- 학교명
	MAJOR           VARCHAR(20) NOT NULL, -- 전공
	ADMISSION_DATE  DATE        NOT NULL, -- 입학년도
	GRADUATION_DATE DATE        NOT NULL  -- 졸업년도
);

-- 학적
ALTER TABLE HAKSA
	ADD CONSTRAINT PK_HAKSA -- 학적 기본키
		PRIMARY KEY (
			P_ID,        -- 개인아이디
			SCHOOL_NAME  -- 학교명
		);

-- 경력
CREATE TABLE CAREER (
	P_ID         VARCHAR(20)   NOT NULL, -- 개인아이디
	P_COMPANY    VARCHAR(100)  NOT NULL, -- 직장명
	P_DEPARTMENT VARCHAR(100)  NOT NULL, -- 부서명
	P_DUTY       VARCHAR(1000) NOT NULL  -- 직무
);

-- 경력
ALTER TABLE CAREER
	ADD CONSTRAINT PK_CAREER -- 경력 기본키
		PRIMARY KEY (
			P_ID,      -- 개인아이디
			P_COMPANY  -- 직장명
		);

-- 진행상황
CREATE TABLE PROGRESS (
	PRO_DATE   DATETIME    NOT NULL, -- 진행일자
	CO_ID      VARCHAR(20) NOT NULL, -- 기업아이디
	P_ID       VARCHAR(20) NOT NULL, -- 개인아이디
	PRO_STATUS VARCHAR(10) NOT NULL  -- 진행상태
);

-- 진행상황
ALTER TABLE PROGRESS
	ADD CONSTRAINT PK_PROGRESS -- 진행상황 기본키
		PRIMARY KEY (
			PRO_DATE, -- 진행일자
			CO_ID,    -- 기업아이디
			P_ID      -- 개인아이디
		);

-- 공고게시판
ALTER TABLE NOTICE_post
	ADD CONSTRAINT FK_COMPANY_TO_NOTICE_post --  기업 -> 공고게시판
		FOREIGN KEY (
			CO_ID -- 기업아이디
		)
		REFERENCES COMPANY ( --  기업
			CO_ID -- 기업아이디
		);

-- 자격증
ALTER TABLE LICENSE
	ADD CONSTRAINT FK_PERSONAL_TO_LICENSE -- 개인 -> 자격증
		FOREIGN KEY (
			P_ID -- 개인아이디
		)
		REFERENCES PERSONAL ( -- 개인
			P_ID -- 개인아이디
		);

-- 학적
ALTER TABLE HAKSA
	ADD CONSTRAINT FK_PERSONAL_TO_HAKSA -- 개인 -> 학적
		FOREIGN KEY (
			P_ID -- 개인아이디
		)
		REFERENCES PERSONAL ( -- 개인
			P_ID -- 개인아이디
		);

-- 경력
ALTER TABLE CAREER
	ADD CONSTRAINT FK_PERSONAL_TO_CAREER -- 개인 -> 경력
		FOREIGN KEY (
			P_ID -- 개인아이디
		)
		REFERENCES PERSONAL ( -- 개인
			P_ID -- 개인아이디
		);

-- 진행상황
ALTER TABLE PROGRESS
	ADD CONSTRAINT FK_COMPANY_TO_PROGRESS --  기업 -> 진행상황
		FOREIGN KEY (
			CO_ID -- 기업아이디
		)
		REFERENCES COMPANY ( --  기업
			CO_ID -- 기업아이디
		);

-- 진행상황
ALTER TABLE PROGRESS
	ADD CONSTRAINT FK_PERSONAL_TO_PROGRESS -- 개인 -> 진행상황
		FOREIGN KEY (
			P_ID -- 개인아이디
		)
		REFERENCES PERSONAL ( -- 개인
			P_ID -- 개인아이디
		);